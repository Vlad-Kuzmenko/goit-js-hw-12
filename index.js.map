{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"50192556-e4befb0963aba9fc8ac0fc72c\";\n\nexport async function getImagesByQuery(query, page) {   \n    const response = await axios.get('https://pixabay.com/api/', {\n        params: {\n            key: API_KEY,\n            q: `${query}`,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: \"true\",\n            per_page: 15,\n            page\n        }\n    });\n    return response.data;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryElemnts = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nlet gallery = new SimpleLightbox('.gallery a');\nconst moreBtn = document.querySelector(\".more-btn\");\n\nexport function createGallery(images) {\n    const markup = images.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => \n       `<li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" />\n                <p class=\"gallery-likes\">Likes <span>${likes}</span></p>\n                <p class=\"gallery-views\">Views <span>${views}</span></p>\n                <p class=\"gallery-comments\">Comments <span>${comments}</span></p>\n                <p class=\"gallery-downloads\">Downloads <span>${downloads}</span></p>\n            </a>\n        </li>`\n    ).join(\"\");\n\n    galleryElemnts.insertAdjacentHTML('beforeend', markup);\n    gallery.refresh();\n}\n\nexport function clearGallery() {\n    galleryElemnts.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n    moreBtn.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n    moreBtn.classList.add(\"hidden\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery } from \"./js/pixabay-api\"\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\"\n\nconst form = document.querySelector(\".form\");\nconst moreBtn = document.querySelector(\".more-btn\");\nlet query;\nlet page = 1;\n\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    clearGallery();\n    hideLoadMoreButton();\n    page = 1;\n    query = event.target.elements[\"search-text\"].value.trim();\n    \n    event.target.elements[\"search-text\"].value = \"\";\n\n    if (query === \"\") {\n        return iziToast.error({\n            title: 'Error',\n            message: `Sorry, your don't write anything. Please try again!`,\n            color: 'yellow', \n        });\n    }\n\n    showLoader();\n\n    try {\n        const res = await getImagesByQuery(query, page);\n        const total = res.totalHits;\n        const arr = res.hits;\n\n        if (arr.length === 0) {\n            hideLoader();\n            return iziToast.warning({\n                title: 'Error',\n                message: `Sorry, there are no images matching your search query ${query}. Please try again!`,\n            });\n        } \n\n        hideLoader();\n        createGallery(arr);\n\n        if (total <= (page * 15)) {\n            hideLoader();\n            hideLoadMoreButton();\n            return iziToast.info({\n                message: `We're sorry, but you've reached the end of search results.`,\n            });\n        }\n\n        showLoadMoreButton();\n        page++;\n    }catch (err) {\n        hideLoader();\n        iziToast.error({\n            title: 'Error',\n            message: `Something went wrong: ${err.message}`,\n        })\n    };\n})\n\nmoreBtn.addEventListener('click', async (event) => {\n    hideLoadMoreButton();\n    showLoader();\n       \n    try { \n        const res = await getImagesByQuery(query, page);\n        const arr = res.hits;\n        const total = res.totalHits;       \n        const elem = document.querySelector(\".gallery-item\");\n        const params = elem.getBoundingClientRect();\n\n        if (arr.length === 0) {\n            hideLoader();\n            return iziToast.error({\n                title: 'Error',\n                message: `Sorry, there are no images matching your search query ${query}. Please try again!`,\n            });\n        }\n\n        hideLoader();\n        createGallery(arr);\n        \n        if (total <= (page * 15)) {\n            hideLoader();\n            hideLoadMoreButton();\n            return iziToast.info({\n                message: `We're sorry, but you've reached the end of search results.`,\n            });\n        }\n\n        window.scrollBy({\n            top: params.height * 2,\n            behavior: \"smooth\",\n        });\n\n        page++;\n        showLoadMoreButton();\n    }catch (err) {\n        hideLoader();\n        iziToast.error({\n            title: 'Error',\n            message: `Something went wrong: ${err.message}`,\n        })\n    };\n})"],"names":["API_KEY","getImagesByQuery","query","page","axios","galleryElemnts","loader","gallery","SimpleLightbox","moreBtn","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","event","iziToast","res","total","arr","err","params"],"mappings":"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"}